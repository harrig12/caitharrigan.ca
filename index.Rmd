---
pagetitle: "Cait Harrigan"
#date: "`r Sys.Date()`"
#logo: "BWface.jpg"
output:
  bookdown::html_document2:
    css: ["files/style.css", "https://use.fontawesome.com/releases/v5.7.2/css/all.css",
          "https://cdn.rawgit.com/jpswalsh/academicons/master/css/academicons.min.css"]
    includes:
      in_header: "files/header.html"
    number_sections: false
    selfcontained: true
    toc_float: true
    toc: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
options(knitr.kable.NA = '')
library(tidyverse)
library(knitr)
library(kableExtra)
library(bibtex)
library(RefManageR)

# when knitting to html for pdf print, set toc to false in the metadata
knit_for_web = rmarkdown::metadata$output$`bookdown::html_document2`$toc
```

```{r tables, include=FALSE}
# bibliography items 
publications <- "files/itme.bib"

googlesheets4::gs4_auth()
cv_entries <- googlesheets4::read_sheet("1JKlSIuDrfC1wa4V1zf4Si_Tu34upiBEn1DlvFfDeFh0", col_types = "c")
cv_entries <- subset(cv_entries, show == T)

# formatting positions with descriptions
longEntry <- function(data, showDesc = F){
  data %>%
  mutate(what = str_c("<span class='work-title'>", 
                      what, "</span><br> <i>", where, "</i>")) %>%
  mutate(what = ifelse(!is.na(description) & showDesc == T, 
                       str_c(what, "<br class='work-break'>", description), what)) %>%
  mutate(when = gsub(when, pattern = " --- ", replacement = " --- <br>")) %>%
  select(when, what) %>%
  kable(escape = F) %>%
  column_spec(1, width_min = "9em") 
}

# formatting for one-liners
shortEntry <- function(data, wide = T){
  data %>%
    select(when, what, where) %>% 
    kable(format = "html", align = "llr", escape = F) %>%
    column_spec(3, italic = T) %>%
    column_spec(2, width = "20em") %>%
    column_spec(1, width = ifelse(wide, "12em", "6em") )
}

bestOf <- function(l){
  # return the first non-na argument
  #print(head(data.frame(l)))
  r <- apply(data.frame(l), FUN = function(x){x[which(!is.na(x))][[1]]}, MAR = 1)
  return(r)
}

# general formatting
cv_entries <- arrange(cv_entries, desc(pmax(year_end, year_begin, na.rm = T)), desc(year_begin), desc(month_begin)) 
stopifnot(all(!is.na(cv_entries$year_begin)))
cv_entries <- cv_entries %>%  
  mutate(month_begin = month.abb[as.numeric(month_begin)]) %>%
  mutate(month_end = month.abb[as.numeric(month_end)]) %>%
  mutate(when = bestOf(list(str_c(month_begin, " ", year_begin, " --- ", month_end, " ", year_end),
                            str_c(month_begin, " ", year_begin, " --- ", year_end),
                            str_c(year_begin, " --- ", year_end),
                            str_c(month_begin, " ", year_begin),
                            year_begin)))
```

<div class="printHider">
<span class="printTitle">Cait Harrigan, MSc.</span>  
<i class="fas fa-envelope"></i> &nbsp; cait.harrigan<i class="fas fa-at fa-xs"></i>mail.utoronto.ca &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<i class="fab fa-github"></i> &nbsp; [harrig12](https://github.com/harrig12/) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<i class="fab fa-linkedin-in"></i> &nbsp; [linkedin.com/in/cait-harrigan/](https://www.linkedin.com/in/cait-harrigan/)
</div>


<div>
## Contact {.invisible}  
</div>

<div class = "row">
<div class = "col-md-6">

I am a graduate student at the University of Toronto supervised by [Quaid Morris](http://www.morrislab.ca/) and [Kieran Campbell](https://www.camlab.ca/), and a graduate affiliate at the [Vector Institute](https://vectorinstitute.ai/). I did my undergraduate studies at the University of Toronto, in Computational Biology and Statistics. My thesis work pertains to cancer genomics, and modelling the evolutionary constraints that underlie how mutation events occur in DNA. I'm passionate about [open science](https://en.wikipedia.org/wiki/Open_science), and promoting great mentorship in the sciences. 
</div>


<div class = "col-md-6">
```{block type='col-6 grid-item', echo=TRUE}
<div class="info-box">

| Center | Left |
|:------:|:-----|
| <i class="fas fa-map-marker-alt"></i>|Department of Computer Science,\
University of Toronto|
| <i class="fas fa-envelope"></i> | cait.harrigan<i class="fas fa-at fa-sm"></i>mail.utoronto.ca |
| <i class="ai ai-orcid ai-1x"></i> | [ORCID](https://orcid.org/0000-0002-9243-9648) |
| <i class="fab fa-github"></i> | [harrig12](https://github.com/harrig12/) |


</div>
```
</div>
</div>


## Education {.nohead}

```{r education}
cv_entries %>% 
  filter(type == 'education') %>% 
  shortEntry()%>%
  column_spec(2, "35em")
```


## Publications {.nohead}

```{r publications}
snatchPrint <- function(bib){
  # extract data from bibentry
  refsList <- capture.output(PrintBibliography(bib))
    
  # add delim, and split entries
  refsList[which(nchar(refsList) == 0)] <- "<DELIM>"
  
  paste0(refsList, collapse = " ") %>% 
    strsplit(split = "<DELIM>") %>%
    unlist() -> entries
  
  # bold my name
  entries <- gsub("Harrigan, Caitlin F", "__Harrigan, Caitlin F__", fixed = T, entries)
  entries <- gsub("Caitlin F Harrigan", "__Caitlin F Harrigan__", fixed = T, entries)
  entries <- gsub("Harrigan, Caitlin", "__Harrigan, Caitlin__", fixed = T, entries)
  entries <- gsub("Caitlin Harrigan", "__Caitlin Harrigan__", fixed = T, entries)
  
  # remove numeric if necessary
  if(!knit_for_web){
    entries <- gsub('\\[', '', entries)
    entries <- gsub('\\]', '.', entries)
  }else{
    entries <- gsub('\\[[[:digit:]]\\] ', '', entries)
  }
  
  return(entries)

}

makePubTable <- function(bib){
  # reverse these to match date order of refs
  tibble(entry = snatchPrint(bib),
         paperLink = rev(unlist(bib$url)), 
         codeLink = rev(unlist(bib$annote))) %>%
    mutate(paperLink = str_c("[paper]", "(", paperLink, ")")) %>%
    mutate(paperLink = cell_spec(paperLink, background = "var(--hl-col)",
                            font_size = "1.2em")) %>%
    mutate(codeLink = ifelse(codeLink == 'NULL', '', codeLink)) %>%
    mutate(codeLink = case_when(codeLink != '' ~ str_c("[code]", "(", codeLink, ")"))) %>%
    mutate(codeLink = case_when(codeLink != '' ~ cell_spec(codeLink, background = "var(--hl-col)",
                                                           font_size = "1.2em"))) %>%
    kable(escape = F) %>%
    column_spec(2:3, width_min = "4em")
    
}

oops <- BibOptions(bib.style = "numeric", match.author = "exact", 
                   sorting = 'ydnt', max.names = 99, first.inits = FALSE, 
                   style = "text", no.print.fields = c("doi","url","urldate", "issn"))


refs <- ReadBib(publications) 
NoCite(refs)


if(!knit_for_web){
  refs %>% 
    snatchPrint() %>%
    kable() 
} else {
  makePubTable(refs)
}

```


## Talks & Posters {.nohead}

```{r talks}
# research dissemination
cv_entries %>% 
  filter(type == 'talks_and_posters') %>% 
  #mutate(what = str_c("<i>", what, "</i>")) %>%
  mutate(what = str_c(what, "<br>", where), where = description) %>%
  shortEntry(wide = F) %>%
  column_spec(2, "42em")
```

`r if(knit_for_web){"<!--"}`


## Work experience {.nohead}
```{r workexp, eval=!knit_for_web, include=!knit_for_web}
cv_entries %>% 
  filter(type == 'work') %>% 
  shortEntry()
```


## Service {.nohead}
```{r service, eval=!knit_for_web, include=!knit_for_web}
cv_entries %>% 
  filter(type == 'service') %>% 
  mutate(when = year_begin) %>%
  shortEntry(wide = F)
```


## Grants & Awards {.nohead}

```{r awards, eval=!knit_for_web, include=!knit_for_web}
cv_entries %>% 
  filter(type == 'grants_and_awards') %>% 
  mutate(when = year_begin) %>%
  shortEntry(wide = F) %>%
  column_spec(2, "30em")
```

 
## Memberships & Affiliations {.nohead}

```{r affiliations, eval=!knit_for_web, include=!knit_for_web}
cv_entries %>% 
  filter(type == "affiliation_and_membership") %>% 
  shortEntry() %>%
  column_spec(2, "12em")
```

`r if(knit_for_web){"-->"}`

## Teaching {.nohead}

```{r teaching}
cv_entries %>% 
  filter(type == 'teaching') %>% 
  mutate(when = str_c(bestOf(list(day_begin,month_begin)), " ", year_begin)) %>%
  shortEntry(wide = F) %>%
  column_spec(2, "40em")
```

`r if(knit_for_web){"<!--"}`

## Supervisory activities {.nohead}

```{r supervision}
cv_entries %>% 
  filter(type == 'supervision') %>% 
  longEntry(showDesc = T)
```

## Mentoring {.nohead}

```{r mentoring}
cv_entries %>% 
  filter(type == "mentorship") %>% 
  longEntry(showDesc = T)
```


## Personal skills & volunteering {.nohead}

```{r volunteering, eval=!knit_for_web, include=!knit_for_web}
cv_entries %>%
  filter(type == 'volunteering' | type == 'participation') %>%
  longEntry(showDesc = T)
```

`r if(knit_for_web){"-->"}`
